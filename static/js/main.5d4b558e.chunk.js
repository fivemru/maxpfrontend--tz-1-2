(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/telegram.0efc6ad3.svg"},32:function(e,t,n){e.exports=n.p+"static/media/twitch.da4c4d30.svg"},33:function(e,t,n){e.exports=n.p+"static/media/twitter.be066898.svg"},34:function(e,t,n){e.exports=n.p+"static/media/vk.763b977a.svg"},35:function(e,t,n){e.exports=n.p+"static/media/youtube.330cdcdc.svg"},36:function(e,t,n){e.exports=n.p+"static/media/web.a19f9979.svg"},43:function(e,t,n){e.exports=n(64)},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),s=n(6),c=n(9),l=(n(52),n(27)),u=n(2),d="ok",m="err",p=n(28),g=n(29),f=n(42),v=n(15),E=n(10),h=n(30),b=n(41),O={wrong_email_or_password:"Wrong email or password",user_not_found:"User not found",unknown_server_status:"Unknown server status",empty_message_from_server:"Empty message from server",network_error:"Server is not available"};function _(e){return O[e]||e}var w=function(e){function t(e,n){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this))).name="ResponseError",a.message=e,a.response=n,Error.captureStackTrace?Error.captureStackTrace(Object(E.a)(a),a.constructor):a.stack=(new Error).stack,a}return Object(h.a)(t,e),Object(g.a)(t,[{key:"toString",value:function(){return _(this.message)}}]),t}(Object(b.a)(Error));function N(e){return e instanceof Error?e.toString():e instanceof Response?"Code: ".concat(e.status,", Detail: ").concat(e.statusText):_(e)}function j(){0}var S={isLogin:!1,isPending:!1,id:null,error:null},y={isPending:!1,userId:null,city:null,languages:null,social:null,error:null},I={isPending:!1,data:null,error:null},L=Object(c.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"LOGIN_SUCCESSED":var r=a.id;return Object(u.a)({},e,{isPending:!1,isLogin:!0,error:null,id:r});case"LOGIN_FAILED":var i=N(a);return j(),Object(u.a)({},e,{isPending:!1,isLogin:!1,error:i});case"LOGOUT":return Object(u.a)({},e,{isLogin:!1,isPending:!1,error:null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_SUCCESSED":var r=a.id;return Object(u.a)({},e,{userId:r});case"USER_INFO_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"USER_INFO_SUCCESSED":var i=a.userId,o=a.city,s=a.languages,c=void 0===s?[]:s,l=a.social,d=(void 0===l?[]:l).slice().sort(function(e,t){var n=e.label,a=t.label;return"web"===n||n<a?-1:n>a?1:0});return Object(u.a)({},e,{isPending:!1,error:null,userId:i,city:o,languages:c,social:d});case"USER_INFO_FAILED":var m=N(a);return j(),Object(u.a)({},e,{isPending:!1,error:m});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"NEWS_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"NEWS_SUCCESSED":return Object(u.a)({},e,{isPending:!1,data:a,error:null});case"NEWS_FAILED":var r=N(a);return j(),Object(u.a)({},e,{isPending:!1,error:r});default:return e}}}),x=[];x.push(l.a);var P=Object(c.d)(L,c.a.apply(void 0,x)),k=n(66),C=n(69),F=n(37),D=n(67),U=(n(53),function(e){var t=e.className,n=e.id,a=e.title,i=e.text;return r.a.createElement("div",{className:"news ".concat(t)},r.a.createElement("h2",{className:"news__title"},"#",n," ",a),r.a.createElement("div",{className:"news__text"},i))}),G=function(e){var t=e.text,n=void 0===t?"Loading...":t;return r.a.createElement("div",null,n)},T=function(e){var t=e.error;return r.a.createElement("div",{className:"error"},t)},q=(n(54),"https://mysterious-reef-29460.herokuapp.com/api/v1");function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=q.replace(/[\\\/]$/,"");return fetch("".concat(n).concat(e),t).then(function(e){if(e.ok)return e.json();throw new w("network_error",e)}).catch(function(e){if("TypeError: Failed to fetch"===e.toString())throw new w("network_error",e);throw e}).then(function(e){var t=e.status,n=e.message;if(t===m)throw new w(void 0===n?"empty_message_from_server":n,e);if(t!==d)throw new w("unknown_server_status",e);return e})}function V(e,t){return A(e,t)}var B=Object(s.b)(function(e){var t=e.news;return{isPending:t.isPending,error:t.error,data:t.data}},{getNews:function(e){return function(t){return t({type:"NEWS_PENDING"}),V("/news").then(function(n){var a=n.data;t({type:"NEWS_SUCCESSED",payload:a}),e instanceof Function&&e(null,a)}).catch(function(n){t({type:"NEWS_FAILED",payload:n,error:!0}),e instanceof Function&&e(n)})}}})(function(e){var t=e.isPending,n=e.data,i=e.getNews,o=e.error;return Object(a.useEffect)(function(){i()},[]),r.a.createElement("div",null,r.a.createElement("h1",null,"News page"),o&&r.a.createElement(T,{error:o}),t&&r.a.createElement(G,{text:"Loading news..."}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Total news: ",r.a.createElement("strong",null,n.length)),r.a.createElement("div",{className:"news-list"},n.map(function(e){return r.a.createElement(U,{key:e.id,id:e.id,title:e.title,text:e.text,className:"news-list__item"})}))))}),W=n(31),R=n.n(W),z=n(32),M=n.n(z),J=n(33),Z=n.n(J),$=n(34),H=n.n($),K=n(35),Q=n.n(K),X=n(36),Y=n.n(X),ee={vk:H.a,telegram:R.a,web:Y.a,youtube:Q.a,twitter:Z.a,twitch:M.a},te=function(e){var t=e.icon,n=e.width,i=void 0===n?24:n,o=e.height,s=void 0===o?24:o,c=e.alt,l=void 0===c?"":c,u=e.hangleNotFound,d=void 0===u?function(){}:u,m=e.className,p=ee[t];return Object(a.useEffect)(function(){p||d(t)},[]),r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("img",{className:m,src:p,width:i,height:s,alt:l}))},ne=(n(55),function(e){var t=e.userId,n=e.city,a=e.languages,i=e.social,o=function(e){j("icon ".concat(e," not found"))};return r.a.createElement("div",null,r.a.createElement("div",null,"ID: ",t),r.a.createElement("div",null,"City: ",n),r.a.createElement("div",null,"Languages:",r.a.createElement("ul",null,a&&a.map(function(e){return r.a.createElement("li",{key:e},e)}))),r.a.createElement("div",null,"Social:",r.a.createElement("ul",{className:"social"},i&&i.map(function(e){var t=e.label,n=e.link;return r.a.createElement("li",{key:n,className:"social__item"},r.a.createElement("a",{href:n},r.a.createElement(te,{className:"social__icon",icon:t,alt:t,hangleNotFound:o}),t))}))))}),ae=(n(56),Object(s.b)(function(e){var t=e.user;return{isPending:t.isPending,error:t.error,user:t}},{getUserInfo:function(e,t){return function(n){return n({type:"USER_INFO_PENDING"}),V("/user-info/".concat(e)).then(function(e){var a=e.data;n({type:"USER_INFO_SUCCESSED",payload:a}),t instanceof Function&&t(null,a)}).catch(function(e){n({type:"USER_INFO_FAILED",payload:e,error:!0}),t instanceof Function&&t(e)})}}})(function(e){var t=e.isPending,n=e.getUserInfo,i=e.user,o=e.error;return Object(a.useEffect)(function(){n(i.userId)},[]),j(),r.a.createElement("div",null,r.a.createElement("h1",null,"Profile page"),o&&r.a.createElement(T,{error:o}),t&&r.a.createElement(G,{text:"Loading profile #".concat(i.userId,"...")}),!o&&!t&&r.a.createElement(ne,i))})),re=n(65),ie=n(23),oe=n.n(ie),se=(n(57),function(e){var t=e.name,n=e.type,a=void 0===n?"text":n,i=e.required,o=e.placeholder,s=e.autoComplete,c=e.onChange,l=e.onBlur,u=e.onFocus,d=e.value,m=e.disabled,p=e.isValid,g=e.error,f=e.className;return r.a.createElement("div",{className:oe()("text-input",{"text-input--valid":p})},r.a.createElement("input",{className:oe()({"text-input__input":!0,"text-input__input--error":!!g},f),name:t,type:a,required:i,placeholder:o,autoComplete:s,onChange:c,onBlur:l,onFocus:u,value:d,disabled:m}),g&&r.a.createElement("span",{className:"text-input__error"},g))}),ce=n(40),le=n(12),ue=n(13),de=(n(58),{login:function(e){return(e.length<3||!/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e))&&"Email is not valid!"},password:function(e){return e.length<1&&"Minimum password length is 1 characters!"}}),me=function(e,t){var n=e.login,a=e.password;return function(e){e({type:"LOGIN_PENDING"});var r={email:n,password:a};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(e,Object(u.a)({method:"POST"},t))}("/validate",{headers:{"Content-type":"application/json"},body:JSON.stringify(r)}).then(function(r){var i=r.data;sessionStorage.setItem("login",n),sessionStorage.setItem("password",a),e({type:"LOGIN_SUCCESSED",payload:i}),t instanceof Function&&t(null,i)}).catch(function(n){e({type:"LOGIN_FAILED",payload:n,error:!0}),t instanceof Function&&t(n)})}},pe=[{isExact:!0,path:"/(index.html)?",component:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Main page"),"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptate aspernatur rem recusandae iure placeat in dignissimos minima? Dignissimos, iusto. Similique non quam nulla nemo autem ipsam impedit dignissimos debitis esse? Ducimus excepturi ipsam libero eos itaque eaque cupiditate dolorum eius autem. Ullam itaque fugit iste accusamus molestias exercitationem ipsa at, veritatis laborum, aut inventore nobis. Neque et eligendi cum hic? Ea neque voluptate deleniti sunt blanditiis nisi eligendi pariatur adipisci soluta corporis accusantium odit dolorem fuga, eos deserunt ex maxime praesentium a quibusdam expedita. Maiores sapiente ex maxime earum aut?")},isNav:!0,link:{isExact:!0,to:"/",text:"Main"}},{path:"/news",component:B,isNav:!0,link:{text:"News"}},{isPrivate:!0,path:"/profile",component:ae,isNav:!0,link:{text:"Profile"}},{path:"/login",component:Object(s.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending,error:t.error}},{authLogin:me})(function(e){var t=e.isLogin,n=e.isPending,i=e.error,o=e.authLogin,s=function(e){var t=e.initValues,n=void 0===t?{}:t,r=e.validate,i=e.onSubmit,o=e.validateWhenInit,s=void 0!==o&&o,c=e.validateOnBlur,l=void 0===c||c,d=e.validateOnChange,m=void 0===d||d,p=Object(a.useState)(!1),g=Object(ue.a)(p,2),f=g[0],v=g[1],E=Object(a.useState)(!1),h=Object(ue.a)(E,2),b=h[0],O=h[1],_=Object(a.useState)(Object(u.a)({},n)),w=Object(ue.a)(_,2),N=w[0],j=w[1],S=Object(a.useState)({}),y=Object(ue.a)(S,2),I=y[0],L=y[1],x=Object(a.useState)({}),P=Object(ue.a)(x,2),k=P[0],C=P[1],F=function(){var e={};for(var t in r){var n=r[t];e[t]=n(N[t])}L(e);var a=Object.values(e).every(function(e){return!e});b!==a&&O(a)};return Object(a.useEffect)(function(){f&&l&&F()},[k]),Object(a.useEffect)(function(){f&&m&&F()},[N]),Object(a.useEffect)(function(){s&&F(),v(!0)},[]),{values:N,errors:I,touched:k,isValid:b,handleChange:function(e){var t=e.currentTarget,n=Object(u.a)({},N,Object(le.a)({},t.name,t.value));j(n)},handleBlur:function(e){var t=e.currentTarget;C(Object(u.a)({},k,Object(le.a)({},t.name,!0)))},handleSubmit:function(e){e.preventDefault(),C(Object.assign.apply(Object,[{}].concat(Object(ce.a)(Object.keys(N).map(function(e){return Object(le.a)({},e,!0)}))))),Object.values(I).every(function(e){return!e})&&i(N)},handleValidate:F,setValues:j,setTouched:C}}({initValues:{login:sessionStorage.getItem("login")||"",password:sessionStorage.getItem("password")||""},validate:de,validateWhenInit:!0,validateOnBlur:!1,onSubmit:function(e){var t=e.login,n=e.password;o({login:t,password:n},function(e){e&&(g(Object(u.a)({},d,{password:!1})),p(Object(u.a)({},c,{password:""})))})}}),c=s.values,l=s.errors,d=s.touched,m=s.isValid,p=s.setValues,g=s.setTouched,f=s.handleBlur,v=s.handleChange,E=s.handleSubmit;return j(),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(re.a,{to:"/profile"}),r.a.createElement("h1",{className:"login-form__title"},"Authorization"),r.a.createElement("form",{className:"login-form"},r.a.createElement("label",null,r.a.createElement(se,{type:"email",name:"login",autoComplete:"email",placeholder:"user@mail.com",value:c.login,isValid:!l.login,error:d.login&&l.login,onBlur:f,onChange:v,disabled:n})),r.a.createElement("label",null,r.a.createElement(se,{type:"password",name:"password",placeholder:"password",autoComplete:"current-password",value:c.password,error:d.password&&l.password,onBlur:f,onChange:v,disabled:n})),r.a.createElement("button",{className:"login-form__btn",onClick:E,disabled:n||!m},n?"wait...":"login"),!m&&i&&r.a.createElement(T,{error:i})))})},{component:function(e){var t=e.location;return j(),r.a.createElement("div",null,r.a.createElement("h1",null,"Not found"),"Page ",r.a.createElement("strong",null,t.pathname)," not found!")},isNav:!0,link:{to:"/azaza",text:"Not found"}}],ge=(n(60),function(e){var t=e.className;return j(),r.a.createElement("nav",{className:"nav ".concat(t)},pe.filter(function(e){return e.isNav}).map(function(e){var t=e.path,n=e.isExact,a=e.link,i=void 0===a?{}:a,o=i.to||t;return r.a.createElement(D.a,{key:o,exact:n,className:"nav__link",activeClassName:"nav__link--active",to:o},i.text)}))}),fe=n(68),ve=Object(fe.a)(Object(s.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending}},{authLogout:function(){return function(e){sessionStorage.setItem("password",""),e({type:"LOGOUT"})}}})(function(e){var t=e.isLogin,n=e.isPending,a=e.authLogout,i=e.className,o=e.history,s=o.location.pathname;return r.a.createElement("div",{className:i},!t&&r.a.createElement("button",{onClick:function(){return o.push("/login",{from:s})},disabled:n},"Login"),t&&r.a.createElement("button",{onClick:a},"Logout"))})),Ee=(n(61),function(){return j(),r.a.createElement("header",{className:"header app__wrapper"},r.a.createElement(ge,{className:"header__nav"}),r.a.createElement(ve,{className:"header__login"}))}),he=n(39),be=Object(s.b)(function(e){return{isLogin:e.auth.isLogin}})(function(e){var t=e.isLogin,n=e.component,a=Object(he.a)(e,["isLogin","component"]);return r.a.createElement(F.a,Object.assign({},a,{render:function(e){return t?r.a.createElement(n,e):r.a.createElement(re.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),Oe=(n(62),Object(s.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending}},{authLogin:me})(function(e){var t=e.authLogin;return Object(a.useEffect)(function(){var e=sessionStorage.getItem("login"),n=sessionStorage.getItem("password");j(),e&&n&&t({login:e,password:n})},[]),j(),r.a.createElement(k.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(Ee,null),r.a.createElement("main",{className:"app__main app__wrapper"},r.a.createElement(C.a,null,pe.map(function(e){var t=e.isPrivate,n=e.component,a=e.path,i=e.isExact,o=t?be:F.a;return r.a.createElement(o,{key:n,exact:i,path:a,component:n})})))))}));n(63);o.a.render(r.a.createElement(s.a,{store:P},r.a.createElement(Oe,null)),document.getElementById("root"))}},[[43,1,2]]]);