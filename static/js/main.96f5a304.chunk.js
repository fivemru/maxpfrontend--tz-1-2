(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/telegram.0efc6ad3.svg"},32:function(e,t,n){e.exports=n.p+"static/media/twitch.da4c4d30.svg"},33:function(e,t,n){e.exports=n.p+"static/media/twitter.be066898.svg"},34:function(e,t,n){e.exports=n.p+"static/media/vk.763b977a.svg"},35:function(e,t,n){e.exports=n.p+"static/media/youtube.330cdcdc.svg"},36:function(e,t,n){e.exports=n.p+"static/media/web.ffeb4651.svg"},43:function(e,t,n){e.exports=n(64)},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=n(6),s=n(9),l=(n(52),n(27)),u=n(2),d="https://mysterious-reef-29460.herokuapp.com/api/v1/",m="ok",p="err",g=n(28),f=n(29),v=n(42),E=n(15),h=n(10),b=n(30),O=n(41),N={wrong_email_or_password:"Wrong email or password",user_not_found:"User not found"};function w(e){return N[e]||e}var _=function(e){function t(e,n){var a;return Object(g.a)(this,t),(a=Object(v.a)(this,Object(E.a)(t).call(this))).name="ResponseError",a.message=e,a.response=n,Error.captureStackTrace?Error.captureStackTrace(Object(h.a)(a),a.constructor):a.stack=(new Error).stack,a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"toString",value:function(){return w(this.message)}}]),t}(Object(O.a)(Error));function j(e){return e instanceof Error?e.toString():e instanceof Response?"Code: ".concat(e.status,", Detail: ").concat(e.statusText):w(e)}function S(){0}var y={isLogin:!1,isPending:!1,id:null,error:null},I={isPending:!1,userId:null,city:null,languages:[],social:[],error:null},L={isPending:!1,data:null,error:null},x=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"LOGIN_SUCCESSED":var r=a.id;return Object(u.a)({},e,{isPending:!1,isLogin:!0,error:null,id:r});case"LOGIN_FAILED":var i=j(a);return S(),Object(u.a)({},e,{isPending:!1,isLogin:!1,error:i});case"LOGOUT":return Object(u.a)({},e,{isLogin:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"LOGIN_SUCCESSED":var r=a.id;return Object(u.a)({},e,{userId:r});case"USER_INFO_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"USER_INFO_SUCCESSED":var i=a.userId,o=a.city,c=a.languages,s=void 0===c?[]:c,l=a.social,d=(void 0===l?[]:l).sort(function(e,t){var n=e.label,a=t.label;return"web"===n||n<a?-1:n>a?1:0});return Object(u.a)({},e,{isPending:!1,userId:i,city:o,languages:s,social:d});case"USER_INFO_FAILED":var m=j(a);return S(),Object(u.a)({},e,{isPending:!1,error:m});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"NEWS_PENDING":return Object(u.a)({},e,{isPending:!0,error:null});case"NEWS_SUCCESSED":return Object(u.a)({},e,{isPending:!1,data:a});case"NEWS_FAILED":var r=j(a);return S(),Object(u.a)({},e,{isPending:!1,error:r});default:return e}}}),P=[];P.push(l.a);var C=Object(s.d)(x,s.a.apply(void 0,P)),k=n(65),F=n(67),D=n(37),U=n(69),G=(n(53),function(e){var t=e.className,n=e.id,a=e.title,i=e.text;return r.a.createElement("div",{className:"news ".concat(t)},r.a.createElement("h2",{className:"news__title"},"#",n," ",a),r.a.createElement("div",{className:"news__text"},i))}),T=function(e){var t=e.text,n=void 0===t?"Loading...":t;return r.a.createElement("div",null,n)},q=function(e){var t=e.error,n=void 0===t?"error":t;return r.a.createElement("div",{className:"error"},n)};n(54);function A(e,t){var n=d.replace(/[\\\/]$/,"");return fetch("".concat(n).concat(e),t).then(function(e){if(!e.ok)throw e;return e.json()}).then(function(e){var t=e.status,n=e.message;if(t===p)throw new _(void 0===n?"Empty message from server":n,e);if(t!==m)throw new _("Unknown server status",e);return e})}function V(e,t){return A(e,t)}var B=Object(c.b)(function(e){var t=e.news;return{isPending:t.isPending,error:t.error,data:t.data}},{getNews:function(e){return function(t){t({type:"NEWS_PENDING"}),V("/news").then(function(n){var a=n.data;t({type:"NEWS_SUCCESSED",payload:a}),e instanceof Function&&e(null,a)}).catch(function(n){t({type:"NEWS_FAILED",payload:n,error:!0}),e instanceof Function&&e(n)})}}})(function(e){var t=e.isPending,n=e.data,i=e.getNews,o=e.error;return Object(a.useEffect)(function(){return i()},[]),r.a.createElement("div",null,r.a.createElement("h1",null,"News page"),o&&r.a.createElement(q,{error:o}),t&&r.a.createElement(T,{text:"Loading news..."}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Total news: ",r.a.createElement("strong",null,n.length)),r.a.createElement("div",{className:"news-list"},n.map(function(e){return r.a.createElement(G,{key:e.id,id:e.id,title:e.title,text:e.text,className:"news-list__item"})}))))}),W=n(31),R=n.n(W),z=n(32),M=n.n(z),J=n(33),Z=n.n(J),$=n(34),H=n.n($),K=n(35),Q=n.n(K),X=n(36),Y=n.n(X),ee={vk:H.a,telegram:R.a,web:Y.a,youtube:Q.a,twitter:Z.a,twitch:M.a},te=function(e){var t=e.icon,n=e.width,i=void 0===n?24:n,o=e.height,c=void 0===o?24:o,s=e.alt,l=void 0===s?"":s,u=e.hangleNotFound,d=void 0===u?function(){}:u,m=e.className,p=ee[t];return Object(a.useEffect)(function(){p||d(t)},[]),r.a.createElement(r.a.Fragment,null,p&&r.a.createElement("img",{className:m,src:p,width:i,height:c,alt:l}))},ne=(n(55),function(e){var t=e.userId,n=e.city,a=e.languages,i=e.social,o=function(e){S("icon ".concat(e," not found"))};return r.a.createElement("div",null,r.a.createElement("div",null,"ID: ",t),r.a.createElement("div",null,"City: ",n),r.a.createElement("div",null,"Languages:",r.a.createElement("ul",null,a.map(function(e){return r.a.createElement("li",{key:e},e)}))),r.a.createElement("div",null,"Social:",r.a.createElement("ul",{className:"social"},i.map(function(e){var t=e.label,n=e.link;return r.a.createElement("li",{key:n,className:"social__item"},r.a.createElement("a",{href:n},r.a.createElement(te,{className:"social__icon",icon:t,alt:t,hangleNotFound:o}),t))}))))}),ae=(n(56),Object(c.b)(function(e){var t=e.user;return{isPending:t.isPending,error:t.error,user:t}},{getUserInfo:function(e,t){return function(n){n({type:"USER_INFO_PENDING"}),V("/user-info/".concat(e)).then(function(e){var a=e.data;n({type:"USER_INFO_SUCCESSED",payload:a}),t instanceof Function&&t(null,a)}).catch(function(e){n({type:"USER_INFO_FAILED",payload:e,error:!0}),t instanceof Function&&t(e)})}}})(function(e){var t=e.isPending,n=e.getUserInfo,i=e.user,o=e.error;return Object(a.useEffect)(function(){return n(i.userId)},[]),S(),r.a.createElement("div",null,r.a.createElement("h1",null,"Profile page"),o&&r.a.createElement("p",{className:"error"},o),t&&r.a.createElement(T,{text:"Loading profile #".concat(i.userId,"...")}),!o&&!t&&r.a.createElement(ne,i))})),re=n(66),ie=n(23),oe=n.n(ie),ce=(n(57),function(e){var t=e.name,n=e.type,a=void 0===n?"text":n,i=e.required,o=e.placeholder,c=e.autoComplete,s=e.onChange,l=e.onBlur,u=e.onFocus,d=e.value,m=e.disabled,p=e.isValid,g=e.error,f=e.className;return r.a.createElement("div",{className:oe()("text-input",{"text-input--valid":p})},r.a.createElement("input",{className:oe()({"text-input__input":!0,"text-input__input--error":!!g},f),name:t,type:a,required:i,placeholder:o,autoComplete:c,onChange:s,onBlur:l,onFocus:u,value:d,disabled:m}),g&&r.a.createElement("span",{className:"text-input__error"},g))}),se=n(40),le=n(12),ue=n(13),de=(n(58),{login:function(e){return(e.length<3||!/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e))&&"Email is not valid!"},password:function(e){return e.length<1&&"Minimum password length is 1 characters!"}}),me=function(e,t){var n=e.login,a=e.password;return function(e){e({type:"LOGIN_PENDING"});var r={email:n,password:a};(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(e,Object(u.a)({method:"POST"},t))})("/validate",{headers:{"Content-type":"application/json"},body:JSON.stringify(r)}).then(function(r){var i=r.data;sessionStorage.setItem("login",n),sessionStorage.setItem("password",a),e({type:"LOGIN_SUCCESSED",payload:i}),t instanceof Function&&t(null,i)}).catch(function(n){e({type:"LOGIN_FAILED",payload:n,error:!0}),t instanceof Function&&t(n)})}},pe=[{isExact:!0,path:"/(index.html)?",component:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Main page"),"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Voluptate aspernatur rem recusandae iure placeat in dignissimos minima? Dignissimos, iusto. Similique non quam nulla nemo autem ipsam impedit dignissimos debitis esse? Ducimus excepturi ipsam libero eos itaque eaque cupiditate dolorum eius autem. Ullam itaque fugit iste accusamus molestias exercitationem ipsa at, veritatis laborum, aut inventore nobis. Neque et eligendi cum hic? Ea neque voluptate deleniti sunt blanditiis nisi eligendi pariatur adipisci soluta corporis accusantium odit dolorem fuga, eos deserunt ex maxime praesentium a quibusdam expedita. Maiores sapiente ex maxime earum aut?")},isNav:!0,link:{isExact:!0,to:"/",text:"Main"}},{path:"/news",component:B,isNav:!0,link:{text:"News"}},{isPrivate:!0,path:"/profile",component:ae,isNav:!0,link:{text:"Profile"}},{path:"/login",component:Object(c.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending,error:t.error}},{authLogin:me})(function(e){var t=e.isLogin,n=e.isPending,i=e.error,o=e.authLogin,c=function(e){var t=e.initValues,n=void 0===t?{}:t,r=e.validate,i=e.onSubmit,o=e.validateWhenInit,c=void 0!==o&&o,s=e.validateOnBlur,l=void 0===s||s,d=e.validateOnChange,m=void 0===d||d,p=Object(a.useState)(!0),g=Object(ue.a)(p,2),f=g[0],v=g[1],E=Object(a.useState)(!1),h=Object(ue.a)(E,2),b=h[0],O=h[1],N=Object(a.useState)(Object(u.a)({},n)),w=Object(ue.a)(N,2),_=w[0],j=w[1],S=Object(a.useState)({}),y=Object(ue.a)(S,2),I=y[0],L=y[1],x=Object(a.useState)({}),P=Object(ue.a)(x,2),C=P[0],k=P[1],F=function(e){var t={},n=e||_;for(var a in r){var i=r[a];t[a]=i(n[a])}L(t);var o=Object.values(t).every(function(e){return!e});b!==o&&O(o)};return c&&f&&(v(!1),F()),{values:_,errors:I,touched:C,isValid:b,handleChange:function(e){var t=e.currentTarget,n=Object(u.a)({},_,Object(le.a)({},t.name,t.value));j(n),m&&F(n)},handleBlur:function(e){var t=e.currentTarget;k(Object(u.a)({},C,Object(le.a)({},t.name,!0))),l&&F()},handleSubmit:function(e){e.preventDefault(),k(Object.assign.apply(Object,[{}].concat(Object(se.a)(Object.keys(_).map(function(e){return Object(le.a)({},e,!0)}))))),F(),Object.values(I).every(function(e){return!e})&&i(_)},handleValidate:F,setValues:function(e){j(e),F(e)},setTouched:k}}({initValues:{login:sessionStorage.getItem("login")||"",password:sessionStorage.getItem("password")||""},validate:de,validateWhenInit:!0,validateOnBlur:!1,onSubmit:function(e){var t=e.login,n=e.password;o({login:t,password:n},function(e){e&&(g(Object(u.a)({},d,{password:!1})),p(Object(u.a)({},s,{password:""})))})}}),s=c.values,l=c.errors,d=c.touched,m=c.isValid,p=c.setValues,g=c.setTouched,f=c.handleBlur,v=c.handleChange,E=c.handleSubmit;return S(),r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(re.a,{to:"/profile"}),r.a.createElement("h1",{className:"login-form__title"},"Authorization"),r.a.createElement("form",{className:"login-form"},r.a.createElement("label",null,r.a.createElement(ce,{type:"email",name:"login",autoComplete:"email",placeholder:"user@mail.com",value:s.login,isValid:!l.login,error:d.login&&l.login,onBlur:f,onChange:v,disabled:n})),r.a.createElement("label",null,r.a.createElement(ce,{type:"password",name:"password",placeholder:"password",autoComplete:"current-password",value:s.password,error:d.password&&l.password,onBlur:f,onChange:v,disabled:n})),r.a.createElement("button",{className:"login-form__btn",onClick:E,disabled:n||!m},n?"wait...":"login"),!m&&i&&r.a.createElement("p",{className:"error"},i)))})},{component:function(e){var t=e.location;return S(),r.a.createElement("div",null,r.a.createElement("h1",null,"Not found"),"Page ",r.a.createElement("strong",null,t.pathname)," not found!")},isNav:!0,link:{to:"/azaza",text:"Not found"}}],ge=(n(60),function(e){var t=e.className;return S(),r.a.createElement("nav",{className:"nav ".concat(t)},pe.filter(function(e){return e.isNav}).map(function(e){var t=e.path,n=e.isExact,a=e.link,i=void 0===a?{}:a,o=i.to||t;return r.a.createElement(U.a,{key:o,exact:n,className:"nav__link",activeClassName:"nav__link--active",to:o},i.text)}))}),fe=n(68),ve=Object(fe.a)(Object(c.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending}},{authLogout:function(){return function(e){sessionStorage.setItem("password",""),e({type:"LOGOUT"})}}})(function(e){var t=e.isLogin,n=e.isPending,a=e.authLogout,i=e.className,o=e.history,c=o.location.pathname;return r.a.createElement("div",{className:i},!t&&r.a.createElement("button",{onClick:function(){return o.push("/login",{from:c})},disabled:n},"Login"),t&&r.a.createElement("button",{onClick:a},"Logout"))})),Ee=(n(61),function(){return S(),r.a.createElement("header",{className:"header app__wrapper"},r.a.createElement(ge,{className:"header__nav"}),r.a.createElement(ve,{className:"header__login"}))}),he=n(39),be=Object(c.b)(function(e){return{isLogin:e.auth.isLogin}})(function(e){var t=e.isLogin,n=e.component,a=Object(he.a)(e,["isLogin","component"]);return r.a.createElement(D.a,Object.assign({},a,{render:function(e){return t?r.a.createElement(n,e):r.a.createElement(re.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),Oe=(n(62),Object(c.b)(function(e){var t=e.auth;return{isLogin:t.isLogin,isPending:t.isPending}},{authLogin:me})(function(e){var t=e.authLogin;return Object(a.useEffect)(function(){var e=sessionStorage.getItem("login"),n=sessionStorage.getItem("password");S(),e&&n&&t({login:e,password:n})},[]),S(),r.a.createElement(k.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(Ee,null),r.a.createElement("main",{className:"app__main app__wrapper"},r.a.createElement(F.a,null,pe.map(function(e){var t=e.isPrivate,n=e.component,a=e.path,i=e.isExact,o=t?be:D.a;return r.a.createElement(o,{key:n,exact:i,path:a,component:n})})))))}));n(63);o.a.render(r.a.createElement(c.a,{store:C},r.a.createElement(Oe,null)),document.getElementById("root"))}},[[43,1,2]]]);